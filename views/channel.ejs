<h1><%= channel.name %></h1>

<div id="messages">

</div>

<div>
    <form id="chat_form">
        <input 
            type="text"
            name="message"
            id="msg"
            placeholder="Enter message"
            autocomplete="off"
            required
            >
        <input type="hidden" id="user" value="<%= user %>">
        <input type="hidden" id="channel" value="<%= channel._id %>">

        <button class="btn btn-primary">Send</button>
    </form>
</div>

<% if (channel.private) { %> 
    <button 
        id="invite_btn" 
        class="btn btn-primary"
        data-bs-toggle="modal" 
        data-bs-target="#invite_modal">
        Invite teammates to join <%= channel.name %> 
    </button>
<% } %> 

<div class="modal" id="invite_modal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Invite teammates to join <%= channel.name %></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form action="/channels/add" method="post">
                <ul>
                    <% for (user of non_subscribers) {%> 
                        <li>
                            <input 
                                name="non_subscriber" 
                                type="checkbox" 
                                value="<%= user._id %>" 
                                id="<%= user._id %>"
                            >
                            <label for="<%= user._id %>">
                                <%= user.first_name %> <%= user.last_name %>
                            </label>
                        </li>
                    <% } %>
                </ul>
            </form>
                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="inviteUsersToChannel()">Invite</button>
            </div>
        </div>
    </div>
  </div>


<script
src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
crossorigin="anonymous"
></script>

<script src="/socket.io/socket.io.js"></script>
<script src="/public/scripts/chat.js"></script>
